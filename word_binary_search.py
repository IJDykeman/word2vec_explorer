import word2vec
import numpy as np
import random as rand 
model = word2vec.load('./text8.bin')
print len(model.vocab)
print """
 .----------------.  .----------------.  .----------------.  .----------------.  .----------------.  .----------------.  .----------------.  .----------------.   
| .--------------. || .--------------. || .--------------. || .--------------. || .--------------. || .--------------. || .--------------. || .--------------. |  
| | _____  _____ | || |     ____     | || |  _______     | || |  ________    | || |    _____     | || | ____   ____  | || |  _________   | || |     ______   | |  
| ||_   _||_   _|| || |   .'    `.   | || | |_   __ \    | || | |_   ___ `.  | || |   / ___ `.   | || ||_  _| |_  _| | || | |_   ___  |  | || |   .' ___  |  | |  
| |  | | /\ | |  | || |  /  .--.  \  | || |   | |__) |   | || |   | |   `. \ | || |  |_/___) |   | || |  \ \   / /   | || |   | |_  \_|  | || |  / .'   \_|  | |  
| |  | |/  \| |  | || |  | |    | |  | || |   |  __ /    | || |   | |    | | | || |   .'____.'   | || |   \ \ / /    | || |   |  _|  _   | || |  | |         | |  
| |  |   /\   |  | || |  \  `--'  /  | || |  _| |  \ \_  | || |  _| |___.' / | || |  / /____     | || |    \ ' /     | || |  _| |___/ |  | || |  \ `.___.'\  | |  
| |  |__/  \__|  | || |   `.____.'   | || | |____| |___| | || | |________.'  | || |  |_______|   | || |     \_/      | || | |_________|  | || |   `._____.'  | |  
| |              | || |              | || |              | || |              | || |              | || |              | || |              | || |              | |  
| '--------------' || '--------------' || '--------------' || '--------------' || '--------------' || '--------------' || '--------------' || '--------------' |  
 '----------------'  '----------------'  '----------------'  '----------------'  '----------------'  '----------------'  '----------------'  '----------------'   
 .----------------.  .----------------.  .----------------.  .----------------.  .----------------.  .----------------.  .----------------.  .----------------.   
| .--------------. || .--------------. || .--------------. || .--------------. || .--------------. || .--------------. || .--------------. || .--------------. |  
| |  _________   | || |  ____  ____  | || |   ______     | || |   _____      | || |     ____     | || |  _______     | || |  _________   | || |  _______     | |  
| | |_   ___  |  | || | |_  _||_  _| | || |  |_   __ \   | || |  |_   _|     | || |   .'    `.   | || | |_   __ \    | || | |_   ___  |  | || | |_   __ \    | |  
| |   | |_  \_|  | || |   \ \  / /   | || |    | |__) |  | || |    | |       | || |  /  .--.  \  | || |   | |__) |   | || |   | |_  \_|  | || |   | |__) |   | |  
| |   |  _|  _   | || |    > `' <    | || |    |  ___/   | || |    | |   _   | || |  | |    | |  | || |   |  __ /    | || |   |  _|  _   | || |   |  __ /    | |  
| |  _| |___/ |  | || |  _/ /'`\ \_  | || |   _| |_      | || |   _| |__/ |  | || |  \  `--'  /  | || |  _| |  \ \_  | || |  _| |___/ |  | || |  _| |  \ \_  | |  
| | |_________|  | || | |____||____| | || |  |_____|     | || |  |________|  | || |   `.____.'   | || | |____| |___| | || | |_________|  | || | |____| |___| | |  
| |              | || |              | || |              | || |              | || |              | || |              | || |              | || |              | |  
| '--------------' || '--------------' || '--------------' || '--------------' || '--------------' || '--------------' || '--------------' || '--------------' |  
 '----------------'  '----------------'  '----------------'  '----------------'  '----------------'  '----------------'  '----------------'  '----------------'   """
LOSE_TEXT = """                                 .       .
                                / `.   .' \\
                        .---.  <    > <    >  .---.
                        |    \  \ - ~ ~ - /  /    |
                         ~-..-~             ~-..-~
                     \~~~\.'                    `./~~~/
           .-~~^-.    \__/       YOU LOSE         \__/
         .'  O    \     /               /       \  \\
        (_____,    `._.'               |         }  \/~~~/
         `----.          /       }     |        /    \__/
               `-.      |       /      |       /      `. ,~~|
                   ~-.__|      /_ - ~ ^|      /- _      `..-'   f: f:
                        |     /        |     /     ~-.     `-. _||_||_
                        |_____|        |_____|         ~ - . _ _ _ _ _>

"""

word1 = rand.choice(model.vocab)
word2 = rand.choice(model.vocab)


def print_word_group(word):
    print word.upper() + ":"
    print map (lambda x: str(x[0]), model.generate_response(*model.cosine(word)).tolist())

print "\n"
def go():
    search_space = model.vocab[:]
    word = rand.choice(model.vocab)
    print "your word is", word
    score = 0
    while True:
        print "\n"*3
        if not word in search_space:
            print LOSE_TEXT,"\n", word, "is no longer in the search space!"
            go()
        print "your score is",score

        word1 = rand.choice(search_space)
        word2 = rand.choice(search_space)

        print "=====word group 1====="
        print_word_group(word1)
        print "\n"
        print "=====word group 2====="
        print_word_group(word2)
        user_input = str(input('Pick the most similar group: '))
        print "user input:", user_input
        if user_input == "1":
            search_space = filter(lambda x: np.dot(model[word1],model[x]) > np.dot(model[word2],model[x]), search_space)
            assert word1 in search_space and not word2 in search_space
            print "you picked word group 1"
        elif user_input == "2":
            search_space = filter(lambda x: np.dot(model[word1],model[x]) < np.dot(model[word2],model[x]), search_space)
            assert word2 in search_space and not word1 in search_space

            print "you picked word group 2"
        score = score+1


go()
#========================
#--------------
# import word2vec
# import numpy as np
# import random as rand 
# model = word2vec.load('./text8.bin')
# from time import sleep
# print """
#  .----------------.  .----------------.  .----------------.  .----------------.  .----------------.  .----------------.  .----------------.  .----------------.   
# | .--------------. || .--------------. || .--------------. || .--------------. || .--------------. || .--------------. || .--------------. || .--------------. |  
# | | _____  _____ | || |     ____     | || |  _______     | || |  ________    | || |    _____     | || | ____   ____  | || |  _________   | || |     ______   | |  
# | ||_   _||_   _|| || |   .'    `.   | || | |_   __ \    | || | |_   ___ `.  | || |   / ___ `.   | || ||_  _| |_  _| | || | |_   ___  |  | || |   .' ___  |  | |  
# | |  | | /\ | |  | || |  /  .--.  \  | || |   | |__) |   | || |   | |   `. \ | || |  |_/___) |   | || |  \ \   / /   | || |   | |_  \_|  | || |  / .'   \_|  | |  
# | |  | |/  \| |  | || |  | |    | |  | || |   |  __ /    | || |   | |    | | | || |   .'____.'   | || |   \ \ / /    | || |   |  _|  _   | || |  | |         | |  
# | |  |   /\   |  | || |  \  `--'  /  | || |  _| |  \ \_  | || |  _| |___.' / | || |  / /____     | || |    \ ' /     | || |  _| |___/ |  | || |  \ `.___.'\  | |  
# | |  |__/  \__|  | || |   `.____.'   | || | |____| |___| | || | |________.'  | || |  |_______|   | || |     \_/      | || | |_________|  | || |   `._____.'  | |  
# | |              | || |              | || |              | || |              | || |              | || |              | || |              | || |              | |  
# | '--------------' || '--------------' || '--------------' || '--------------' || '--------------' || '--------------' || '--------------' || '--------------' |  
#  '----------------'  '----------------'  '----------------'  '----------------'  '----------------'  '----------------'  '----------------'  '----------------'   
#  .----------------.  .----------------.  .----------------.  .----------------.  .----------------.  .----------------.  .----------------.  .----------------.   
# | .--------------. || .--------------. || .--------------. || .--------------. || .--------------. || .--------------. || .--------------. || .--------------. |  
# | |  _________   | || |  ____  ____  | || |   ______     | || |   _____      | || |     ____     | || |  _______     | || |  _________   | || |  _______     | |  
# | | |_   ___  |  | || | |_  _||_  _| | || |  |_   __ \   | || |  |_   _|     | || |   .'    `.   | || | |_   __ \    | || | |_   ___  |  | || | |_   __ \    | |  
# | |   | |_  \_|  | || |   \ \  / /   | || |    | |__) |  | || |    | |       | || |  /  .--.  \  | || |   | |__) |   | || |   | |_  \_|  | || |   | |__) |   | |  
# | |   |  _|  _   | || |    > `' <    | || |    |  ___/   | || |    | |   _   | || |  | |    | |  | || |   |  __ /    | || |   |  _|  _   | || |   |  __ /    | |  
# | |  _| |___/ |  | || |  _/ /'`\ \_  | || |   _| |_      | || |   _| |__/ |  | || |  \  `--'  /  | || |  _| |  \ \_  | || |  _| |___/ |  | || |  _| |  \ \_  | |  
# | | |_________|  | || | |____||____| | || |  |_____|     | || |  |________|  | || |   `.____.'   | || | |____| |___| | || | |_________|  | || | |____| |___| | |  
# | |              | || |              | || |              | || |              | || |              | || |              | || |              | || |              | |  
# | '--------------' || '--------------' || '--------------' || '--------------' || '--------------' || '--------------' || '--------------' || '--------------' |  
#  '----------------'  '----------------'  '----------------'  '----------------'  '----------------'  '----------------'  '----------------'  '----------------'   """
# LOSE_TEXT = """                                 .       .
#                                 / `.   .' \\
#                         .---.  <    > <    >  .---.
#                         |    \  \ - ~ ~ - /  /    |
#                          ~-..-~             ~-..-~
#                      \~~~\.'                    `./~~~/
#            .-~~^-.    \__/       YOU LOSE         \__/
#          .'  O    \     /               /       \  \\
#         (_____,    `._.'               |         }  \/~~~/
#          `----.          /       }     |        /    \__/
#                `-.      |       /      |       /      `. ,~~|
#                    ~-.__|      /_ - ~ ^|      /- _      `..-'   f: f:
#                         |     /        |     /     ~-.     `-. _||_||_
#                         |_____|        |_____|         ~ - . _ _ _ _ _>

# """



# print "\n"
# def go():
#     def print_word_group(word):
#         print word.upper() + ":\n", map (lambda x: str(x[0]), model.generate_response(*model.cosine(word)).tolist())
#     print "===========new game==========="
#     search_space = model.vocab[:]
#     word = rand.choice(model.vocab)
#     print "your word is", word
#     score = 0
#     while True:
#         print "\n"*3
#         if not word in search_space:
#             print LOSE_TEXT
#             sleep(1)
#             print "\n", "you picked the word farther from",word,"!"
#             go()
#         print "your score is",score
#         words = (rand.choice(search_space), rand.choice(search_space))
#         print "=====word group 1====="
#         print_word_group(words[0])
#         print "\n\n=====word group 2====="
#         print_word_group(words[1])
#         user_input = 0 if str(input('\nPick the most similar group: ')) == "1" else 1
#         search_space = filter(lambda x: np.dot(model[words[user_input]],model[x]) > np.dot(model[words[int(not user_input)]],model[x]), search_space)
#         print words
#         print words[user_input]
#         # if user_input == 0:
#         #     assert words[0] in search_space and not words[1] in search_space
#         # elif user_input == 1:
#         #     assert words[1] in search_space and not words[0] in search_space
#         # print "you picked word group", user_input
#         score = score+1

# go()

